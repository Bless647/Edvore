<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>Maths Quiz</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family: Arial, sans-serif; background-color:#121212; color:#E0E0E0; padding:20px; display:flex; justify-content:center; align-items:center; height:100vh; }
        .menu-container { background-color:black; padding:30px; border-radius:8px; box-shadow:0 4px 8px rgba(0,0,0,0.3); text-align:center; width:100%; max-width:600px; }
        h1 { font-size:2.5em; color:#fff; }
        h3 { font-size:1.6em; color:#dcdcdc; margin-bottom:20px; }
        .no-bullets { list-style:none; padding:0; margin:20px 0; }
        .no-bullets li { margin:10px 0; font-size:1.2em; padding:10px; background-color:#333; border-radius:5px; cursor:pointer; transition:0.3s; }
        .no-bullets li:hover { background-color:#555; }
        .feedback { position:fixed; top:10%; left:50%; transform:translate(-50%, -50%); background-color:#2d7b36; color:white; padding:15px; border-radius:5px; font-size:1.2em; z-index:100; }
        .progress { font-size:1.2em; margin-top:10px; color:#e0e0e0; }
        .submit-btn, .back-btn { margin-top:20px; padding:10px 20px; background-color:#28a745; color:white; border:none; border-radius:5px; cursor:pointer; font-size:1.2em; }
        .submit-btn:hover, .back-btn:hover { background-color:#218838; }
        .back-btn { background-color:#FF6347; margin-top:10px; }
        .back-btn:hover { background-color:#e55347; }
    </style>
</head>
<body>
<div class="menu-container">
    <h1>Maths</h1>
    <h3 id="question"></h3> 
    <ul class="no-bullets" id="answers-list">
        <li id="a" onclick="chooseAnswer('a')"></li>
        <li id="b" onclick="chooseAnswer('b')"></li>
        <li id="c" onclick="chooseAnswer('c')"></li>
    </ul>
    <div id="progress" class="progress"></div>
    <button id="back" class="back-btn" onclick="goBack()">Back to Subjects</button>
    <button id="submit" class="submit-btn" onclick="submitQuiz()" style="display:none;">Submit Quiz</button>

    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCgdTnXYep_-C6IqaGp1DUuB5gBTBGhx_0",
            authDomain: "edvore-b11b7.firebaseapp.com",
            databaseURL: "https://edvore-b11b7-default-rtdb.firebaseio.com",
            projectId: "edvore-b11b7",
            storageBucket: "edvore-b11b7.appspot.com",
            messagingSenderId: "239809584061",
            appId: "1:239809584061:web:a20da5cfa66a347c0fd0d4"
        };
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
    </script>

    <script>
        let index = 0;
        const quest = document.getElementById("question");
        const progress = document.getElementById("progress");
        const answersList = document.getElementById("answers-list");
        const userAnswers = [];
        const backBtn = document.getElementById("back");
        const submitBtn = document.getElementById("submit");

        const questions = [
            { quest:"1. Solve for x: 2x + 3 = 7", a:"x = 2", b:"x = 1", c:"x = 5", correct:"a" },
            { quest:"2. Simplify: 3(x + 4) = ?", a:"3x + 4", b:"3x + 12", c:"x + 12", correct:"b" },
            { quest:"3. Solve for y: 5y - 10 = 0", a:"y = 2", b:"y = -2", c:"y = 10", correct:"a" },
            { quest:"4. What is 7 × 8?", a:"54", b:"56", c:"64", correct:"b" },
            { quest:"5. Solve: x/3 = 9", a:"x = 27", b:"x = 3", c:"x = 12", correct:"a" },
            { quest:"6. Evaluate: 4² + 3", a:"19", b:"16", c:"25", correct:"a" },
            { quest:"7. Solve: 2x - 5 = 9", a:"x = 7", b:"x = 5", c:"x = 12", correct:"a" },
            { quest:"8. Simplify: 6(2 + x)", a:"12 + 6x", b:"6x + 12", c:"12x + 6", correct:"b" },
            { quest:"9. Solve: 3x + 4 = 19", a:"x = 5", b:"x = 6", c:"x = 7", correct:"a" },
            { quest:"10. What is the value of 9 × 5?", a:"45", b:"40", c:"50", correct:"a" }
        ];

        function initQuest() {
            quest.innerHTML = questions[index].quest;
            document.getElementById("a").innerHTML = "A) " + questions[index].a;
            document.getElementById("b").innerHTML = "B) " + questions[index].b;
            document.getElementById("c").innerHTML = "C) " + questions[index].c;
            progress.innerHTML = `Question ${index+1} of ${questions.length}`;
            backBtn.style.display = "inline-block";
            submitBtn.style.display = "none";
        }

        function chooseAnswer(answer) {
            if(answer === questions[index].correct){
                showFeedback("Correct!");
            } else {
                showFeedback("Wrong answer. Try again!");
            }
            userAnswers[index] = answer;
            index++;
            if(index < questions.length){
                initQuest();
            } else {
                quest.innerHTML = "Math Quiz Completed!";
                answersList.style.display = "none";
                progress.style.display = "none";
                backBtn.style.display = "none";
                submitBtn.style.display = "inline-block";
            }
        }

        function showFeedback(msg){
            let feedback = document.createElement("div");
            feedback.innerHTML = msg;
            feedback.classList.add("feedback");
            document.body.appendChild(feedback);
            setTimeout(()=>feedback.remove(),2000);
        }

        function submitQuiz(){
            const username = localStorage.getItem('username');
            if(!username){
                alert("You must be logged in to submit!");
                window.location.href="index.html";
                return;
            }
            const refDB = database.ref('Maths_Submission/'+Date.now());
            refDB.set({username: username, answers:userAnswers})
            .then(()=>{
                alert("Your answers were sent to Firebase successfully!");
                window.location.href = "Subjects.html";
            })
            .catch((err)=>{alert("Error submitting quiz: "+err);});
        }

        function goBack(){
            window.location.href = "Subjects.html";
        }

        window.onload = initQuest;
    </script>
</div>
</body>
    </html>
