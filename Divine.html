<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>My Details - Divine</title>
  <style>
    body {
      font-family: 'Roboto', sans-serif;
      background: linear-gradient(135deg, #2a2a2a, #222); 
      color: white;
      line-height: 1.6;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    header {
      text-align: center;
      padding: 50px 20px;
      background: rgba(0, 0, 0, 0.7);
      position: relative;
    }

    .Divine {
      width: 150px;
      height: 150px; 
      border-radius: 50%;
      margin-top: 20px;
      background: url('Divine.jpg') no-repeat center center;
      background-size: cover;
      border: 2px solid white; 
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
    }

    .intro {
      text-align: center;
      margin: 15% 0 40px;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 20px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.7);
    }

    .intro h1 {
      font-size: 3rem;
      margin-bottom: 20px;
      color: whitesmoke; 
      font-weight: bold;
    }

    .intro a {
      font-size: 1.2rem;
      color: springgreen; 
      text-decoration: none;
      border: 2px solid lightblue;
      padding: 8px 20px;
      border-radius: 5px;
      transition: all 0.3s ease;
    }

    .intro a:hover {
      background-color: black;
      color: whitesmoke;
      text-shadow: 0 0 10px royalblue; 
    }

    .history {
      width: 90%;
      margin: auto;
      margin-bottom: 40px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.7);
    }

    th, td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    }

    th {
      background: rgba(0, 0, 0, 0.8);
      font-size: 1.1rem;
    }

    tr:hover {
      background: rgba(0, 255, 255, 0.1);
    }

    footer {
      text-align: center;
      padding: 20px;
      background-color: rgba(0, 0, 0, 0.7);
    }
  </style>
</head>
<body>
  <header>
    <div class="Divine"></div>
  </header>

  <section class="intro">
    <h1>Welcome, Siwelane Divine</h1>
    <a href="Subjects.html">Continue</a>
  </section>

  <!-- History Table -->
  <section class="history">
    <h2 style="text-align:center; margin-bottom:15px;">Your Quiz History</h2>
    <table id="historyTable">
      <thead>
        <tr>
          <th>Subject</th>
          <th>Score</th>
          <th>Date</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="3">Loading your records...</td></tr>
      </tbody>
    </table>
  </section>

  <footer>
    <p>Â© 2025 Edvore</p>
  </footer>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyCgdTnXYep_-C6IqaGp1DUuB5gBTBGhx_0",
      authDomain: "edvore-b11b7.firebaseapp.com",
      databaseURL: "https://edvore-b11b7-default-rtdb.firebaseio.com/",
      projectId: "edvore-b11b7",
      storageBucket: "edvore-b11b7.appspot.com",
      messagingSenderId: "239809584061",
      appId: "1:239809584061:web:a20da5cfa66a347c0fd0d4"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    async function loadHistory() {
      const username = "divine"; // set for this page
      const historyRef = ref(db, "quizHistory/" + username);
      const snapshot = await get(historyRef);
      const tableBody = document.querySelector("#historyTable tbody");

      tableBody.innerHTML = "";

      if (snapshot.exists()) {
        const records = snapshot.val();
        Object.values(records).forEach(record => {
          const row = document.createElement("tr");
          row.innerHTML = `
            <td>${record.subject}</td>
            <td>${record.score}</td>
            <td>${new Date(record.date).toLocaleDateString()}</td>
          `;
          tableBody.appendChild(row);
        });
      } else {
        tableBody.innerHTML = `<tr><td colspan="3">No records found</td></tr>`;
      }
    }

    loadHistory();
  </script>
</body>
    </html>
